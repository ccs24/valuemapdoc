define("mod_valuemapdoc/tabulatormap-old",["mod_valuemapdoc/tabulatorlib","core/ajax","core_user/repository","core/notification","jquery"],(function(Tabulator,Ajax,UserRepository,Notification,$){var HierarchySelector={cmid:null,init:function(cmid){this.cmid=cmid,this.setupEventListeners(),this.initializeState()},setupEventListeners:function(){var self=this;$(document).on("change",'select[data-hierarchy-level="market"]',(function(){var marketId=$(this).val();self.loadChildren(marketId,"customer"),self.clearChildSelectors(["customer","person","opportunity"])})),$(document).on("change",'select[data-hierarchy-level="customer"]',(function(){var customerId=$(this).val();customerId>0?(self.loadChildren(customerId,"person"),self.loadChildren(customerId,"opportunity")):self.clearChildSelectors(["person","opportunity"])})),$(document).on("change",'select[data-hierarchy-level="person"], select[data-hierarchy-level="opportunity"]',(function(){self.updateSummary()})),$(document).on("click","#hierarchy-reset-button",(function(){self.reset()}))},initializeState:function(){console.log("initializeState",this.cmid),this.loadInitialMarkets(),this.updateVisibility(),this.updateSummary()},loadInitialMarkets:function(){var marketSelector=$('select[data-hierarchy-level="market"]');console.log("lenghts:".marketSelector.length),marketSelector.length;var request={methodname:"mod_valuemapdoc_get_markets",args:{cmid:this.cmid,parentid:0,childtype:"market"}};console.log("[Load markets] Fetching data for market cmid=".concat(this.cmid,", parent=0")),Ajax.call([request])[0].done((function(response){console.log("üîç Initial markets loaded:",response),response.success&&response.options&&(marketSelector.empty(),response.options.forEach((function(option){marketSelector.append('<option value="'+option.value+'">'+option.text+"</option>")})))})).fail((function(error){console.error("Error loading initial markets:",error)}))},loadChildren:function(parentId,childType){var self=this,selector=$('select[data-hierarchy-level="'+childType+'"]');if(0===selector.length)return Promise.resolve();selector.prop("disabled",!0),selector.html('<option value="0">≈Åadowanie...</option>');var request={methodname:"mod_valuemapdoc_get_markets",args:{cmid:this.cmid,parentid:parseInt(parentId),childtype:childType}};return console.log("[Load children] Fetching data for ".concat(childType,", cmid=").concat(this.cmid,", parent=").concat(parentId)),Ajax.call([request])[0].done((function(response){if(console.log("üîç Loaded children for",childType,":",response),response.success)return self.updateSelectorOptions(selector,response.options),selector.prop("disabled",!1),self.updateVisibility(),response;throw new Error("Failed to load "+childType+" options")})).fail((function(error){throw console.error("Error loading children:",error),Notification.addNotification({message:"Error loading "+childType+" options: "+error.message,type:"error"}),selector.prop("disabled",!1),selector.html('<option value="0">-- Wybierz --</option>'),error}))},updateSelectorOptions:function(selector,options){selector.empty(),options.forEach((function(option){var optionElement=$("<option></option>").attr("value",option.value).text(option.text);option.selected&&optionElement.prop("selected",!0),selector.append(optionElement)}))},clearChildSelectors:function(levels){levels.forEach((function(level){var selector=$('select[data-hierarchy-level="'+level+'"]');if(selector.length>0){selector.empty();var placeholder="-- "+level.charAt(0).toUpperCase()+level.slice(1)+" --";selector.append('<option value="0">'+placeholder+"</option>"),selector.val(0)}})),this.updateVisibility()},updateVisibility:function(){var marketValue=$('select[data-hierarchy-level="market"]').val()||0,customerValue=$('select[data-hierarchy-level="customer"]').val()||0,resetButton=$("#hierarchy-reset-button"),customerContainer=$('select[data-hierarchy-level="customer"]').closest(".input-group");marketValue>0?customerContainer.show():customerContainer.hide();var personContainer=$('select[data-hierarchy-level="person"]').closest(".input-group"),opportunityContainer=$('select[data-hierarchy-level="opportunity"]').closest(".input-group");customerValue>0?(personContainer.show(),opportunityContainer.show()):(personContainer.hide(),opportunityContainer.hide()),marketValue>0||customerValue>0?resetButton.show():resetButton.hide()},updateSummary:function(){var summary=[],icons={market:"üîç",customer:"üèõ",person:"üë§",opportunity:"üí∞"};["market","customer","person","opportunity"].forEach((function(level){var selector=$('select[data-hierarchy-level="'+level+'"]'),value=selector.val(),text=selector.find("option:selected").text();value&&value>0&&"-- Wybierz --"!==text&&"≈Åadowanie..."!==text&&summary.push(icons[level]+" "+text)}));var summaryElement=$(".hierarchy-selector-summary");summaryElement.length>0&&(summary.length>0?summaryElement.html("<strong>Wybrano:</strong> "+summary.join(" ‚Üí ")).show():summaryElement.hide())},getCurrentSelection:function(){return{market:$('select[data-hierarchy-level="market"]').val()||0,customer:$('select[data-hierarchy-level="customer"]').val()||0,person:$('select[data-hierarchy-level="person"]').val()||0,opportunity:$('select[data-hierarchy-level="opportunity"]').val()||0}},validateSelection:function(){var selection=this.getCurrentSelection(),errors=[];return selection.customer>0&&0==selection.market&&errors.push("Market must be selected when customer is selected"),selection.person>0&&0==selection.customer&&errors.push("Customer must be selected when person is selected"),selection.opportunity>0&&0==selection.customer&&errors.push("Customer must be selected when opportunity is selected"),{valid:0===errors.length,errors:errors,selection:selection}},reset:function(){$("select[data-hierarchy-level]").each((function(){$(this).val(0)})),this.clearChildSelectors(["customer","person","opportunity"]),this.updateVisibility(),this.updateSummary()},getSelectedHierarchyData:function(){var selection=this.getCurrentSelection(),data={};return selection.market>0&&(data.hierarchy_market=selection.market),selection.customer>0&&(data.hierarchy_customer=selection.customer),selection.person>0&&(data.hierarchy_person=selection.person),selection.opportunity>0&&(data.hierarchy_opportunity=selection.opportunity),data}};return{init:function(){var _document$querySelect;console.log("[tabulatormap] Module loaded"),function(){console.log("[initHierarchySelectors] Initializing hierarchy selectors...");const levels=["market","customer","person","opportunity"],marketSelect=document.querySelector("#hierarchy_market");if(marketSelect){const localCmid=parseInt(marketSelect.dataset.cmid,10);console.log("[initHierarchySelectors] Forcing market fetch for cmid=".concat(localCmid)),function(type,parentid,cmid){const select=document.querySelector("#hierarchy_".concat(type));if(!select)return void console.warn("[updateSelect] Missing select element for #hierarchy_".concat(type));select.innerHTML="",console.log("[AJAX] Requesting data (monitor) for type:",type,"parentid:",parentid,"cmid:",cmid),Ajax.call([{methodname:"mod_valuemapdoc_get_markets",args:{cmid:cmid,parentid:parseInt(parentid,10),childtype:type}}])[0].done((function(result){console.log("[AJAX] Monitor received data for",type,result),result&&result.options?(result.options.forEach((opt=>{const option=document.createElement("option");option.value=opt.value,option.textContent=opt.text,opt.selected&&(option.selected=!0),select.appendChild(option)})),select.parentElement&&(select.parentElement.style.display="")):console.warn("[updateSelect] No options returned for ".concat(type))})).fail((function(error){console.error("[AJAX] Monitor error for",type,error),Notification.exception(error)}))}("market",0,localCmid)}else console.warn("[initHierarchySelectors] Cannot find #hierarchy_market element.");function capitalize(str){return str.charAt(0).toUpperCase()+str.slice(1)}const hierarchyMap={market:["customer"],customer:["person","opportunity"],person:[],opportunity:[]},parallelLevels={customer:["person","opportunity"]};$("#hierarchy-reset-button").on("click",(function(){levels.forEach((function(level,index){const $sel=$("#hierarchy_"+level);$sel.val("0"),index>0&&$sel.parent().hide()}))})),["market","customer"].forEach((function(level){const $select=$("#hierarchy_"+level);$select.length&&$select.on("change",(function(){!function(currentLevel){const index=levels.indexOf(currentLevel),$current=$("#hierarchy_"+currentLevel),selectedId=$current.val();let cmid=$current.data("cmid");if(!cmid){const marketEl=document.querySelector("#hierarchy_market");marketEl&&marketEl.dataset.cmid&&(cmid=parseInt(marketEl.dataset.cmid,10))}if(console.log("[AJAX DEBUG] cmid before call:",cmid),levels.filter((level=>levels.indexOf(level)>index&&!(parallelLevels[currentLevel]||[]).includes(level))).forEach((nextLevel=>{const $lower=$("#hierarchy_"+nextLevel);$lower.parent().hide(),$lower.empty(),$lower.append($("<option>").val("0").text("-- "+capitalize(nextLevel)+" --"))})),"0"===selectedId||!hierarchyMap[currentLevel]||0===hierarchyMap[currentLevel].length)return;(hierarchyMap[currentLevel]||[]).forEach((level=>{const $next=$("#hierarchy_"+level);Ajax.call([{methodname:"mod_valuemapdoc_get_markets",args:{cmid:parseInt(cmid,10),parentid:parseInt(selectedId,10),childtype:level}}])[0].done((function(result){console.log("[AJAX] Monitor received data for",level,result),result&&result.options&&result.options.length>1&&($next.empty(),$next.append($("<option>").val("0").text("-- "+capitalize(level)+" --")),result.options.slice(1).forEach((opt=>{$next.append($("<option>").val(opt.value).text(opt.text))})),$next.parent().show())})).fail((function(error){console.error("[AJAX] Monitor error for",level,error),Notification.exception(error)}))}))}(level)}))}))}(),console.log("HierarchySelector INIT1");const el=document.querySelector("#valuemap-table-js"),columns=JSON.parse(el.dataset.columns),courseid=el.dataset.courseid,cmid=el.dataset.cmid,filtercmid=el.dataset.filtercmid||"",groupid=(null===(_document$querySelect=document.querySelector("#groupfilter"))||void 0===_document$querySelect?void 0:_document$querySelect.value)||0,hierarchyContainer=document.querySelector(".hierarchy-selector, .hierarchy-selector-compact");hierarchyContainer&&(HierarchySelector.init(parseInt(cmid)),console.log("üîç Hierarchy Selector initialized for cmid:",cmid));const fullscreenBtn=document.querySelector("#toggle-fullscreen");function showSelectDialog(instances,callback){const dialog=document.createElement("div");dialog.innerHTML='\n                    <label>Wybierz aktywno≈õƒá Master:</label><br>\n                    <select id="master-select" style="margin-top: 8px; width: 100%;">\n                        '.concat(instances.map((i=>'<option value="'.concat(i.cmid,'">').concat(i.name,"</option>"))).join(""),'\n                    </select>\n                    <div style="margin-top: 12px; text-align: right;">\n                        <button id="master-cancel">Anuluj</button>\n                        <button id="master-confirm">OK</button>\n                    </div>\n                '),dialog.style="position: fixed; top: 20%; left: 50%; transform: translateX(-50%); padding: 20px; background: white; border: 1px solid #ccc; z-index: 9999;",document.body.appendChild(dialog),dialog.querySelector("#master-cancel").onclick=()=>{document.body.removeChild(dialog)},dialog.querySelector("#master-confirm").onclick=()=>{const selectedId=parseInt(dialog.querySelector("#master-select").value);document.body.removeChild(dialog),callback(selectedId)}}fullscreenBtn&&fullscreenBtn.addEventListener("click",(()=>{document.body.classList.toggle("valuemapdoc-fullscreen"),document.body.classList.contains("valuemapdoc-fullscreen")?fullscreenBtn.textContent="‚ùé Zamknij pe≈Çny ekran":fullscreenBtn.textContent="üî≥ Pe≈Çny ekran"}));const enhancedColumns=function(columns){return[{formatter:"rowSelection",titleFormatter:"rowSelection",hozAlign:"center",headerSort:!1,width:50},...columns.map((col=>({...col,headerFilter:"input",editable:cell=>1!==cell.getRow().getData().ismaster,editor:"textarea"})))]}(columns);Ajax.call([{methodname:"mod_valuemapdoc_get_entries",args:{courseid:courseid,cmid:cmid,include_master:filtercmid,groupid:groupid}}])[0].done((function(response){console.log("üîç Entries loaded:",response);const table=new Tabulator(el,{data:response,columns:enhancedColumns,layout:"fitDataTable",height:"100%",width:"100%",pagination:!0,paginationSize:20,placeholder:"Brak danych do wy≈õwietlenia",rowFormatter:function(row){1===row.getData().ismaster&&(row.getElement().style.backgroundColor="#eaffea",row.getElement().classList.add("ismaster"))},selectable:!0});table.on("cellEdited",(function(cell){const updatedData=cell.getRow().getData();Ajax.call([{methodname:"mod_valuemapdoc_update_cell",args:{id:updatedData.id,field:cell.getField(),value:cell.getValue()}}])[0].done((function(response){})).fail((function(error){console.error("‚ùå B≈ÇƒÖd:",error),alert("Nie uda≈Ço siƒô zapisaƒá zmian.")}))})),table.on("rowDblClick",(function(e,row){const data=row.getData();if(1===data.ismaster){const rateUrl="".concat(M.cfg.wwwroot,"/mod/valuemapdoc/edit.php?id=").concat(cmid,"&entryid=").concat(data.id);window.open(rateUrl)}})),el.addEventListener("click",(function(event){const editBtn=event.target.closest(".btn-edit"),deleteBtn=event.target.closest(".btn-delete"),moveBtn=event.target.closest(".btn-move");if(editBtn){const id=editBtn.dataset.id;window.location.href="edit.php?id=".concat(cmid,"&entryid=").concat(id)}if(deleteBtn){const id=deleteBtn.dataset.id,entryid=parseInt(id,10),cmidInt=parseInt(cmid,10);confirm("Czy na pewno chcesz usunƒÖƒá ten wpis?")&&Ajax.call([{methodname:"mod_valuemapdoc_delete_entry",args:{entryid:entryid,cmid:cmidInt}}])[0].done((function(){table.deleteRow(entryid)})).fail((function(error){console.error("‚ùå B≈ÇƒÖd usuwania wpisu:",error),alert("Nie uda≈Ço siƒô usunƒÖƒá wpisu.")}))}if(moveBtn){const id=moveBtn.dataset.id;confirm("Czy na pewno chcesz przenie≈õƒá ten wpis do master?")&&Ajax.call([{methodname:"mod_valuemapdoc_get_master_instances",args:{courseid:courseid}}])[0].done((function(instances){if(0!==instances.length)if(instances.length>1)showSelectDialog(instances,(function(selectedId){Ajax.call([{methodname:"mod_valuemapdoc_move_entry_to_master",args:{entryid:id,targetcmid:selectedId}}])[0].done((function(){table.deleteRow(id)})).fail((function(error){alert("Nie uda≈Ço siƒô przenie≈õƒá wpisu.")}))}));else{const selectedId=instances[0].cmid;Ajax.call([{methodname:"mod_valuemapdoc_move_entry_to_master",args:{entryid:id,targetcmid:selectedId}}])[0].done((function(){table.deleteRow(id)})).fail((function(error){alert("Nie uda≈Ço siƒô przenie≈õƒá wpisu.")}))}else alert("Brak dostƒôpnych aktywno≈õci typu Master.")})).fail((function(error){alert("Nie uda≈Ço siƒô pobraƒá aktywno≈õci Master.")}))}}));const searchInput=document.querySelector("#valuemap-search");searchInput&&searchInput.addEventListener("input",(function(){const filterValue=this.value.toLowerCase();table.setFilter((data=>columns.some((col=>{var _data$field;const field=col.field;return null===(_data$field=data[field])||void 0===_data$field?void 0:_data$field.toString().toLowerCase().includes(filterValue)}))))}));const generateButton=document.querySelector("#generate-button");generateButton&&generateButton.addEventListener("click",(function(){const selectedData=table.getSelectedData();if(!selectedData.length)return void alert("Proszƒô zaznaczyƒá co najmniej jeden rekord.");const templateSelect=document.querySelector("#templateid");if(!templateSelect||!templateSelect.value)return void alert("Wybierz szablon przed generowaniem dokumentu.");if(hierarchyContainer){const validation=HierarchySelector.validateSelection();if(!validation.valid&&validation.errors.length>0)return void alert("B≈ÇƒÖd w wyborze hierarchii:\n"+validation.errors.join("\n"))}const form=document.createElement("form");form.method="POST",form.action=generateButton.dataset.action||"generate.php";const idInput=document.createElement("input");idInput.type="hidden",idInput.name="id",idInput.value=cmid,form.appendChild(idInput);const templateInput=document.createElement("input");templateInput.type="hidden",templateInput.name="templateid",templateInput.value=templateSelect.value,form.appendChild(templateInput),selectedData.forEach((entry=>{const input=document.createElement("input");input.type="hidden",input.name="entryids[]",input.value=entry.id,form.appendChild(input)}));["market","customer","person","opportunity"].forEach((level=>{const select=document.getElementById("hierarchy_".concat(level));if(select&&select.value&&"0"!==select.value){const input=document.createElement("input");input.type="hidden",input.name="".concat(level,"id"),input.value=select.value,form.appendChild(input)}}));const filenameprefix=document.getElementById("filenameprefix");if(filenameprefix&&filenameprefix.value){const input=document.createElement("input");input.type="hidden",input.name="filenameprefix",input.value=filenameprefix.value,form.appendChild(input)}if(hierarchyContainer){const hierarchyData=HierarchySelector.getSelectedHierarchyData();Object.keys(hierarchyData).forEach((key=>{const input=document.createElement("input");input.type="hidden",input.name=key,input.value=hierarchyData[key],form.appendChild(input)}))}const spinner=document.querySelector("#spinner-indicator");spinner&&(spinner.classList.remove("d-none"),sessionStorage.setItem("valuemapdoc_pending_generation","1"),sessionStorage.setItem("valuemapdoc_pending_timestamp",Date.now().toString())),document.body.appendChild(form),form.submit()}));const editBulkButton=document.querySelector("#edit-bulk-button");editBulkButton&&editBulkButton.addEventListener("click",(function(){const selectedData=table.getSelectedData();if(selectedData.length)if(1===selectedData.length){const id=selectedData[0].id,url="".concat(M.cfg.wwwroot,"/mod/valuemapdoc/edit.php?id=").concat(cmid,"&entryid=").concat(id);window.location.href=url}else{const ids=selectedData.map((r=>r.id)),url=new URL("".concat(M.cfg.wwwroot,"/mod/valuemapdoc/edit_bulk.php"));url.searchParams.append("id",cmid),url.searchParams.append("entryids",ids.join(",")),window.open(url.toString())}else alert("Zaznacz rekordy do edycji.")}));const duplicateBulkButton=document.querySelector("#duplicate-bulk-button");duplicateBulkButton&&duplicateBulkButton.addEventListener("click",(function(){const selectedData=table.getSelectedData();if(!selectedData.length)return void alert("Zaznacz rekordy do powielenia.");const ids=selectedData.map((r=>r.id));Ajax.call([{methodname:"mod_valuemapdoc_create_entries_bulk",args:{entryids:ids,cmid:cmid}}])[0].done((response=>{table.updateOrAddData(response),table.deselectRow()})).fail((error=>{console.error("‚ùå B≈ÇƒÖd powielania wielu rekord√≥w:",error),alert("Nie uda≈Ço siƒô powieliƒá rekordy.")}))}));const emptyBulkButton=document.querySelector("#empty-bulk-button");emptyBulkButton&&emptyBulkButton.addEventListener("click",(function(){Ajax.call([{methodname:"mod_valuemapdoc_create_entries_bulk",args:{entryids:{},cmid:cmid}}])[0].done((function(response){table.updateOrAddData(response),table.deselectRow()})).fail((error=>{console.error("‚ùå B≈ÇƒÖd tworzenia pustych rekord√≥w:",error)}))})),table.on("rowSelectionChanged",(function(data){["#delete-bulk-button","#generate-button","#move-bulk-button","#edit-bulk-button","#duplicate-bulk-button"].forEach((selector=>{const button=document.querySelector(selector);button&&(data.length>0?(button.disabled=!1,button.removeAttribute("disabled"),button.classList.remove("disabled")):(button.setAttribute("disabled",!0),button.classList.add("disabled"),button.disabled=!0))}))}));const deleteBulkButton=document.querySelector("#delete-bulk-button");deleteBulkButton&&deleteBulkButton.addEventListener("click",(function(){const selectedData=table.getSelectedData();if(!selectedData.length)return void alert("Zaznacz rekordy do usuniƒôcia.");const filteredData=selectedData.filter((r=>1!==r.ismaster)),ids=filteredData.map((r=>r.id)),blocked=selectedData.length-filteredData.length;blocked>0&&alert("".concat(blocked," rekord(√≥w) typu Master nie mogƒÖ zostaƒá usuniƒôte i zosta≈Çy pominiƒôte.")),ids.length?confirm("Czy na pewno chcesz usunƒÖƒá ".concat(ids.length," rekord√≥w?"))&&Ajax.call([{methodname:"mod_valuemapdoc_delete_bulk",args:{entryids:ids,cmid:cmid}}])[0].done((()=>{ids.forEach((id=>table.deleteRow(id))),table.deselectRow()})).fail((error=>{console.error("‚ùå B≈ÇƒÖd usuwania wielu rekord√≥w:",error),alert("Nie uda≈Ço siƒô usunƒÖƒá rekord√≥w.")})):alert("Nie zaznaczono ≈ºadnych rekord√≥w mo≈ºliwych do usuniƒôcia.")}));const moveBulkButton=document.querySelector("#move-bulk-button");moveBulkButton&&moveBulkButton.addEventListener("click",(function(){const selectedData=table.getSelectedData();selectedData.length?Ajax.call([{methodname:"mod_valuemapdoc_get_master_instances",args:{courseid:courseid}}])[0].done((function(instances){0!==instances.length?showSelectDialog(instances,(function(targetcmid){const ids=selectedData.map((r=>r.id));Ajax.call([{methodname:"mod_valuemapdoc_move_bulk",args:{entryids:ids,targetcmid:targetcmid}}])[0].done((()=>{ids.forEach((id=>table.deleteRow(id)))})).fail((error=>{console.error("‚ùå B≈ÇƒÖd usuwania wielu rekord√≥w:",error),alert("Nie uda≈Ço siƒô przenie≈õƒá rekord√≥w.")}))})):alert("Brak dostƒôpnych aktywno≈õci typu Master.")})).fail((error=>{console.error("‚ùå B≈ÇƒÖd pobierania instancji Master:",error),alert("Nie uda≈Ço siƒô pobraƒá listy Master Map.")})):alert("Zaznacz rekordy do przeniesienia.")}));const exportButton=document.querySelector("#export-button");exportButton&&exportButton.addEventListener("click",(function(){const selectedData=table.getSelectedData(),form=document.createElement("form");form.method="POST",form.action=exportButton.dataset.action||"export.php";const idInput=document.createElement("input");idInput.type="hidden",idInput.name="id",idInput.value=cmid,form.appendChild(idInput),selectedData.length>0&&selectedData.forEach((entry=>{const input=document.createElement("input");input.type="hidden",input.name="entryids[]",input.value=entry.id,form.appendChild(input)})),document.body.appendChild(form),form.submit()})),window.addEventListener("resize",(()=>{table.redraw(!0)}));const groupFilter=document.querySelector("#groupfilter");groupFilter&&groupFilter.addEventListener("change",(()=>{const selectedGroupId=groupFilter.value,currentFilterCmid=(null==masterFilter?void 0:masterFilter.value)||filtercmid;Ajax.call([{methodname:"mod_valuemapdoc_get_entries",args:{courseid:courseid,cmid:cmid,include_master:currentFilterCmid,groupid:parseInt(selectedGroupId)}}])[0].done((function(newResponse){table.setData(newResponse)})).fail((function(error){console.error("‚ùå B≈ÇƒÖd ≈Çadowania nowych danych po zmianie grupy:",error),alert("‚ùå AJAX reload error (group):",error)}))}));const masterFilter=document.querySelector("#masterfilter");masterFilter&&masterFilter.addEventListener("change",(()=>{var _document$querySelect2;const newFilterCmid=masterFilter.value;UserRepository.setUserPreference("mod_valuemapdoc_masterfilters",cmid+":"+newFilterCmid).then((()=>{console.log("‚úÖ Preferencja zapisana:",newFilterCmid)})).catch((error=>{console.error("‚ùå B≈ÇƒÖd zapisu preferencji:",error)})),Ajax.call([{methodname:"mod_valuemapdoc_get_entries",args:{courseid:courseid,cmid:cmid,include_master:newFilterCmid,groupid:(null===(_document$querySelect2=document.querySelector("#groupfilter"))||void 0===_document$querySelect2?void 0:_document$querySelect2.value)||0}}])[0].done((function(newResponse){table.setData(newResponse)})).fail((function(error){console.error("‚ùå B≈ÇƒÖd ≈Çadowania nowych danych:",error),alert("‚ùå AJAX reload error:",error)}))}));const hierarchyResetButton=document.querySelector("#hierarchy-reset-button");hierarchyResetButton&&hierarchyContainer&&hierarchyResetButton.addEventListener("click",(function(){HierarchySelector.reset()}))})).fail((function(error){alert("Nie uda≈Ço siƒô za≈Çadowaƒá danych."),console.error("‚ùå AJAX error:",error)}))},getHierarchySelector:function(){return HierarchySelector}}}));

//# sourceMappingURL=tabulatormap-old.min.js.map