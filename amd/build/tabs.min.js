/**
 * Lightweight tabs handler for Moodle plugin.
 *
 * @copyright  2024
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_valuemapdoc/tabs",[],(function(){return{init:function(){function showTab(hash){document.querySelectorAll("#valuemapdoc-tabs .tab-pane").forEach((function(tab){tab.classList.remove("active","show")})),document.querySelectorAll("#valuemapdoc-tabs .nav-link").forEach((function(link){link.classList.remove("active")}));var activeTab=document.querySelector(hash),activeLink=document.querySelector('[data-href="'+hash+'"]');activeTab&&activeTab.classList.add("active","show"),activeLink&&activeLink.classList.add("active")}if(document.querySelectorAll("#valuemapdoc-tabs .nav-link").forEach((function(link){link.addEventListener("click",(function(e){e.preventDefault();var targetHash=this.getAttribute("data-href");targetHash&&("#content-tab"===targetHash?require(["mod_valuemapdoc/tablecontent"],(function(module){module.init();var spinner=document.querySelector("#spinner-indicator"),isPending="1"===sessionStorage.getItem("valuemapdoc_pending_generation"),startTime=Date.now();spinner&&isPending&&spinner.classList.remove("d-none"),isPending&&function checkDocumentsReady(){require(["core/ajax"],(function(Ajax){var container=document.querySelector("#valuemapdoc-content-table");if(container){var courseid=container.dataset.courseid,cmid=container.dataset.cmid;Ajax.call([{methodname:"mod_valuemapdoc_get_content_entries",args:{courseid:courseid,cmid:cmid,include_master:0}}])[0].then((function(entries){var ready=entries.length&&entries.some((function(e){return"ready"===e.status})),expired=Date.now()-startTime>2e4;ready||expired?(spinner&&spinner.classList.add("d-none"),sessionStorage.removeItem("valuemapdoc_pending_generation")):setTimeout(checkDocumentsReady,5e3)}))}}))}(),showTab(targetHash)})):(history.pushState(null,null,targetHash),showTab(targetHash)))}))})),window.location.hash)showTab(window.location.hash);else{var firstTabLink=document.querySelector("#valuemapdoc-tabs .nav-link[data-href]");if(firstTabLink){var firstHash=firstTabLink.getAttribute("data-href");firstHash&&(history.replaceState(null,null,firstHash),showTab(firstHash))}}window.addEventListener("hashchange",(function(){window.location.hash&&showTab(window.location.hash)}))}}}));

//# sourceMappingURL=tabs.min.js.map