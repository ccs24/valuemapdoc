var _systemImportTransformerGlobalIdentifier="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:{};
/**
 * Lightweight tabs handler for Moodle plugin.
 *
 * @copyright  2024
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */define("mod_valuemapdoc/tabs",[],(function(){return{init:function(){function showTab(hash){document.querySelectorAll("#valuemapdoc-tabs .tab-pane").forEach((function(tab){tab.classList.remove("active","show")})),document.querySelectorAll("#valuemapdoc-tabs .nav-link").forEach((function(link){link.classList.remove("active")}));const activeTab=document.querySelector(hash),activeLink=document.querySelector('[data-href="'+hash+'"]');activeTab&&activeTab.classList.add("active","show"),activeLink&&activeLink.classList.add("active")}if(document.querySelectorAll("#valuemapdoc-tabs .nav-link").forEach((function(link){link.addEventListener("click",(function(e){e.preventDefault();const targetHash=this.getAttribute("data-href");targetHash&&("#content-tab"===targetHash?("function"==typeof _systemImportTransformerGlobalIdentifier.define&&_systemImportTransformerGlobalIdentifier.define.amd?new Promise((function(resolve,reject){_systemImportTransformerGlobalIdentifier.require(["mod_valuemapdoc/tablecontent"],resolve,reject)})):"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require||"undefined"!=typeof module&&module.component&&_systemImportTransformerGlobalIdentifier.require&&"component"===_systemImportTransformerGlobalIdentifier.require.loader?Promise.resolve(require("mod_valuemapdoc/tablecontent")):Promise.resolve(_systemImportTransformerGlobalIdentifier["mod_valuemapdoc/tablecontent"])).then((module=>{module.init();const spinner=document.querySelector("#spinner-indicator"),isPending="1"===sessionStorage.getItem("valuemapdoc_pending_generation"),startTime=Date.now();spinner&&isPending&&spinner.classList.remove("d-none"),isPending&&function checkDocumentsReady(){require(["core/ajax"],(function(Ajax){const container=document.querySelector("#valuemapdoc-content-table");if(!container)return;const courseid=container.dataset.courseid,cmid=container.dataset.cmid;Ajax.call([{methodname:"mod_valuemapdoc_get_content_entries",args:{courseid:courseid,cmid:cmid,include_master:0}}])[0].then((function(entries){const ready=entries.length&&entries.some((e=>"ready"===e.status)),expired=Date.now()-startTime>2e4;ready||expired?(null==spinner||spinner.classList.add("d-none"),sessionStorage.removeItem("valuemapdoc_pending_generation")):setTimeout(checkDocumentsReady,5e3)}))}))}(),showTab(targetHash)})):(history.pushState(null,null,targetHash),showTab(targetHash)))}))})),window.location.hash)showTab(window.location.hash);else{const firstTabLink=document.querySelector("#valuemapdoc-tabs .nav-link[data-href]");if(firstTabLink){const firstHash=firstTabLink.getAttribute("data-href");firstHash&&(history.replaceState(null,null,firstHash),showTab(firstHash))}}window.addEventListener("hashchange",(function(){window.location.hash&&showTab(window.location.hash)}))}}}));

//# sourceMappingURL=tabs.min.js.map